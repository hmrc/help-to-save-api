@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

<!DOCTYPE HTML><html><head><title>Help To Save API documentation</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="https://github.com/raml2html/raml2html 6.6.0"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script><script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script><script type="text/javascript">
      $(document).ready(function() {
        $('.page-header pre code, .top-resource-description pre code, .modal-body pre code').each(function(i, block) {
          hljs.highlightBlock(block);
        });

        $('[data-toggle]').click(function() {
          var selector = $(this).data('target') + ' pre code';
          $(selector).each(function(i, block) {
            hljs.highlightBlock(block);
          });
        });

        // open modal on hashes like #_action_get
        $(window).bind('hashchange', function(e) {
          var anchor_id = document.location.hash.substr(1); //strip #
          var element = $('#' + anchor_id);

          // do we have such element + is it a modal?  --> show it
          if (element.length && element.hasClass('modal')) {
            element.modal('show');
          }
        });

        // execute hashchange on first page load
        $(window).trigger('hashchange');

        // remove url fragment on modal hide
        $('.modal').on('hidden.bs.modal', function() {
          try {
            if (history && history.replaceState) {
                history.replaceState({}, '', '#');
            }
          } catch(e) {}
        });
      });
    </script><style>
      .hljs {
        background: transparent;
      }
      .parent {
        color: #999;
      }
      .list-group-item > .badge {
        float: none;
        margin-right: 6px;
      }
      .panel-title > .methods {
        float: right;
      }
      .badge {
        border-radius: 0;
        text-transform: uppercase;
        width: 70px;
        font-weight: normal;
        color: #f3f3f6;
        line-height: normal;
      }
      .badge_get {
        background-color: #63a8e2;
      }
      .badge_post {
        background-color: #6cbd7d;
      }
      .badge_put {
        background-color: #22bac4;
      }
      .badge_delete {
        background-color: #d26460;
      }
      .badge_patch {
        background-color: #ccc444;
      }
      .list-group, .panel-group {
        margin-bottom: 0;
      }
      .panel-group .panel+.panel-white {
        margin-top: 0;
      }
      .panel-group .panel-white {
        border-bottom: 1px solid #F5F5F5;
        border-radius: 0;
      }
      .panel-white:last-child {
        border-bottom-color: white;
        -webkit-box-shadow: none;
        box-shadow: none;
      }
      .panel-white .panel-heading {
        background: white;
      }
      .tab-pane ul {
        padding-left: 2em;
      }
      .tab-pane h1 {
        font-size: 1.3em;
      }
      .tab-pane h2 {
        font-size: 1.2em;
        padding-bottom: 4px;
        border-bottom: 1px solid #ddd;
      }
      .tab-pane h3 {
        font-size: 1.1em;
      }
      .tab-content {
        border-left: 1px solid #ddd;
        border-right: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        padding: 10px;
      }
      #sidebar {
        margin-top: 30px;
        padding-right: 5px;
        overflow: auto;
        height: 90%;
      }
      .top-resource-description {
        border-bottom: 1px solid #ddd;
        background: #fcfcfc;
        padding: 15px 15px 0 15px;
        margin: -15px -15px 10px -15px;
      }
      .resource-description {
        border-bottom: 1px solid #fcfcfc;
        background: #fcfcfc;
        padding: 15px 15px 0 15px;
        margin: -15px -15px 10px -15px;
      }
      .resource-description p:last-child {
        margin: 0;
      }
      .list-group .badge {
        float: left;
      }
      .method_description {
        margin-left: 85px;
      }
      .method_description p:last-child {
        margin: 0;
      }
      .list-group-item {
        cursor: pointer;
      }
      .list-group-item:hover {
        background-color: #f5f5f5;
      }
      pre code {
        overflow: auto;
        word-wrap: normal;
        white-space: pre;
      }
      .items {
        background: #f5f5f5;
        color: #333;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 9.5px;
        margin: 0 0 10px;
        font-size: 13px;
        line-height: 1.42857143;
      }
      .examples {
        margin-left: 0.5em;
      }
      .resource-modal li > ul {
        margin-bottom: 1em;
      }
    </style></head><body data-spy="scroll" data-target="#sidebar"><div class="container"><div class="row"><div class="col-md-9" role="main"><div class="page-header"><h1>Help To Save API documentation <small>version 2.0</small></h1><p>https://api.service.hmrc.gov.uk/</p><h3 id="overview"><a href="#overview">Overview</a></h3><p>Help to Save (‘HtS’) is a new government scheme to encourage people on low incomes to build up a “rainy day” fund.</p><p>Help to Save will target working families on the lowest incomes to help them build up their savings. The scheme will be open to 3.5 million adults in receipt of Universal Credit with minimum weekly household earnings equivalent to 16 hours at the National Living Wage, or those in receipt of Working Tax Credit.</p><p>A customer can deposit up to a maximum of £50 per month in the account. It will work by providing a 50% government bonus on the highest amount saved into a HtS account. The bonus is paid after two years with an option to save for a further two years, meaning that people can save up to £2,400 and benefit from government bonuses worth up to £1,200. Savers will be able to use the funds in any way they wish. The published implementation date for this is Q2/2018, but the project will have a controlled go-live with a pilot population in Q1/2018.</p><h3 id="what-is-this-api-for-">What is this API for?</h3><p>This is a private API on the HMRC API Platform with user-restricted access for the Help to Save (HtS) product that behaves as a proxy to manage accounts on NS&amp;I.</p><p>Before invoking the create account endpoint, the caller is assumed to have already checked that the applicant is Eligible for a account creation.</p><h3 id="versioning"><a href="#versioning">Versioning</a></h3><p>A specific version of the API can be requested by providing an Accept header with a media type of application/vnd.hmrc.v2.0+json</p><p>Additionally, the version number in the JSON payload within the &#39;Header&#39; section should be set to 2.0 unless by prior agreement with HMRC.</p><h4 id="json-schema-">JSON Schema:</h4><p>The JSON schema is set at version 4: <a href="http://json-schema.org/draft-04/schema">http://json-schema.org/draft-04/schema</a></p><h3 id="timeouts"><a href="#timeouts">Timeouts</a></h3><p>The default HMRC / MDTP API platform timeout is 20 seconds, as set by Play. The timeout for this interface has been modified to 48 seconds. The caller must set a request timeout of &gt; 48 seconds, eg: &gt;= 50 seconds.</p><h3 id="security_matters"><a href="#security_matters">Security Matters</a></h3><p>It is important that the Vendor maintain strict access procedures to the HMRC Developer Hub covering the Live account, and ideally the Test Sandbox Account as well. This API is a private/restricted application endpoint and due diligence needs to be applied to the account access process in order not to expose the shared Server Token secret.</p><p>This API contains Fraud Detection measures and is audited by HMRC. This does not mean that the Vendor is absconded from the same due-diligence and procedures must be in place upstream of this API to help prevent fraud.</p><h3 id="creating_and_updating_accounts"><a href="#creating_and_updating_accounts">Creating and Updating Accounts</a></h3><p>A <code>POST</code> to the create/update account endpoint can be used to both create and update an account. The distinction between the two is made by checking MDTP checking whether or not an account already exists. If an account already exists, the request is treated as an update account request. Otherwise, the request is treated as a create account request. Each account is identified using the NINO as the primary key.</p><h4 id="parameters">Parameters</h4><p>For the <code>POST</code> account end point, the JSON payload consists of a <code>header</code> and <code>body</code>. The primary key used to identify accounts is the NINO, which resides in the <code>body</code>. MDTP uses the <code>header</code> and NS&amp;I are passed the <code>body</code>.</p><p>The NINO is an optional parameter in the request body. If no NINO is supplied then a NINO will be derived in the MDTP backend systems. If a NINO does not exist then a <code>403 (Forbidden)</code> will be returned by the API.</p><p>In a create account request, if some mandatory fields are not supplied, an attempt to retrieve the information on MDTP will be made. If such retrieval is not possible a <code>500 (Internal Server Error)</code> will be returned by the API. For create account the mandatory fields are:</p><ul><li><code>forename</code></li><li><code>surname</code></li><li><code>dateOfBirth</code></li><li><code>nino</code></li><li><code>address1</code>, <code>address2</code> and <code>postcode</code></li><li><code>registrationChannel</code></li></ul><p>The exception to the above is <code>registrationChannel</code> - for all create account requests this has to be supplied in the request body.</p><p>In an update account request, only requests will be accepted where updates to the fields given are supported. This currently comprises of:</p><ul><li><code>email</code></li><li><code>backDetails</code> If update requests are received where other fields are populated a <code>400 (Bad Request)</code> will be given and no attempt to update any details will be made.</li></ul><p><strong>For create and update account requests using privileged access, the NINO is a mandatory field.</strong></p><h4 id="errors">Errors</h4><p>When creating accounts, <code>201 (Created)</code> is the expected response and <code>409 (Conflict)</code> is used to indicate that an account has already been created with the given details. Other <code>4xx</code> and <code>5xx</code> HTTP status codes indicates failure.</p><p>For updating accounts, <code>200 (OK)</code> is the expected repsonse. All other HTTP responses should be treated as errors.</p><h4 id="data-transformations">Data Transformations</h4><h5 id="data-transformations-by-hmrc-">Data Transformations by HMRC:</h5><p>For the following fields;</p><ul><li><code>forename</code></li><li><code>surname</code></li><li><code>address1</code></li><li><code>address2</code></li><li><code>address3</code></li><li><code>address4</code></li><li><code>address5</code></li><li><code>phoneNumber</code></li></ul><p>control characters <code>TAB \t</code>, <code>NEWLINE \n</code>, <code>CR \r</code> are replaced with single space, consecutive spaces greater than 1 are replaced with a single space and leading &amp; trailing spaces are removed.</p><h5 id="data-transformations-by-nsi-">Data Transformations by NSI:</h5><p>For the following fields;</p><ul><li><code>forename</code></li><li><code>surname</code></li><li><code>address1</code></li><li><code>address2</code></li><li><code>address3</code></li><li><code>address4</code></li><li><code>address5</code></li><li><code>phoneNumber</code></li></ul><p>accented characters are replaced with unaccented equivalent characters. For forename and surname, characters that are not one of <code>a-z</code>, <code>A-Z</code>, <code>&amp;</code>, <code>space</code>, <code>fullstop</code>, <code>comma</code>, <code>hyphen</code> are removed, the first character if it is one of <code>&amp;</code>, <code>fullstop</code>, <code>comma</code>, <code>hyphen</code> is removed, consecutive permissible special characters (<code>&amp;</code>, <code>fullstop</code>, <code>comma</code>, <code>hyphen</code>) are removed. For surname the last character if it is one of <code>&amp;</code>, <code>fullstop</code>, <code>comma</code>, <code>hyphen</code> is removed.</p><h4 id="diacritics-and-legal-considerations">Diacritics and Legal Considerations</h4><p>This section highlights API internal handling of diacritic (accented) chars when the POST create account end point is triggered. The following Diacritic handling rules only target the forename &amp; surname. Address &amp; Telephone fields are accepted as-is.</p><p>In this API diacritic characters will be converted to the undecorated underlying chracter. For example, a manual conversion of ‘Höben’ normally converts to ‘Hoeben’, but the conversion within the API will be to ‘o’ not ‘oe’, i.e ‘Hoben’. As such, it could be argued that the legal name or address of that person has been changed. The view by HMRC/MDTP &amp; NS&amp;I is that this name change is not legally significant. You may want to consult your legal representative to ensure they share the same view.</p><p>Only diacritic chars up to and including Unicode 3.0 at <a href="http://www.unicode.org/Public/3.0-Update/UnicodeData-3.0.0.txt">http://www.unicode.org/Public/3.0-Update/UnicodeData-3.0.0.txt</a> will have a 1:1 char conversion attempt. If say a Scandinavian char ø is presented, the char is removed. E.g. surname "O&#39;Connor-Jørgensen" converts to "O&#39;Connor-Jrgensen".</p><h4 id="digitally-excluded-callers">Digitally Excluded Callers</h4><p>When creating accounts for digitally excluded people, the communicationPreference field must be set to "00" and registrationChannel must be set to "callCentre".</p><h3 id="checking_eligibility"><a href="#checking_eligibility">Checking Eligibility</a></h3><h4 id="invalid-responses">Invalid responses</h4><p>There are some combinations of parameters that are allowed by the JSON schema of the response format but will never occur. These are:</p><ul><li><p>The combination of “hasWTC” and “hasUC” both being false with an eligible response is not possible</p><pre> 
{
&nbsp&nbsp“eligibility”: { 
&nbsp&nbsp&nbsp&nbsp“isEligible”  : true,
&nbsp&nbsp&nbsp&nbsp“hasWTC”      : false,
&nbsp&nbsp&nbsp&nbsp“hasUC”       : false
&nbsp&nbsp},
&nbsp&nbsp  “accountExists” : false
}
</pre></li><li><p>If an account does not already exists there will always be an accompanying object describing the eligibility result</p><pre> 
{ “accountExists” : false }
</pre></li><li><p>If an account already exists there will never be an accompanying “eligibility” object</p><pre> 
{
&nbsp&nbsp“eligibility”   : { … },
&nbsp&nbsp“accountExists” : true 
}
</pre></li></ul><h3 id="getting_account_information"><a href="#getting_account_information">Getting Account Information</a></h3><p>The request to get account information will use the National Insurance Number (NINO) of the user as the account identifier. The NINO is inferred from the user&#39;s Government Gateway login session.</p></div><div class="panel panel-default"><div class="panel-heading"><h3 id="individuals" class="panel-title">/individuals</h3></div><div class="panel-body"><div class="panel-group"><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_individuals_help_to_save_account"><span class="parent">/individuals/help-to-save</span>/account</a> <span class="methods"><a href="#individuals_help_to_save_account_get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a> <a href="#individuals_help_to_save_account_post"><span class="badge badge_post">post <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_individuals_help_to_save_account" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#individuals_help_to_save_account_get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Get help-to-save account information</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#individuals_help_to_save_account_post'" class="list-group-item"><span class="badge badge_post">post <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Sends a request to create or update an account on behalf of the user, noting the value fields below are all example values with the exception of fields Accept and Content-Type which should be presented as quoted string values as shown. For further information on field formats and examples, please see <a href="https://developer.service.hmrc.gov.uk/api-documentation/docs/reference-guide">https://developer.service.hmrc.gov.uk/api-documentation/docs/reference-guide</a>, noting the timezone should be a UTC offset as outlined in the righthand column at <a href="https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations">https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations</a></p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="individuals_help_to_save_account_get"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/individuals/help-to-save</span>/account</h4></div><div class="modal-body"><div class="alert alert-info"><p>Get help-to-save account information</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:help-to-save</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#individuals_help_to_save_account_get_request" data-toggle="tab">Request</a></li><li><a href="#individuals_help_to_save_account_get_response" data-toggle="tab">Response</a></li><li><a href="#individuals_help_to_save_account_get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="individuals_help_to_save_account_get_request"><h3>Annotations</h3><ul><li><strong>annotations.scope</strong><pre><code>"read:help-to-save"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Bearer [SERVER-TOKEN]</p></li><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul></div><div class="tab-pane" id="individuals_help_to_save_account_get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "A JSON schema to validate a Help To Save - Get Account JSON payload",
  "type": "object",
  "properties": {
    "accountNumber": {
      "type": "string",
      "maxLength": 30,
      "description": "The account number"
    },
    "headroom": {
      "type": "number",
      "description": "How much money can still be paid into the account in the current month"
    },
    "closed": {
      "type": "boolean",
      "description": "Whether or not the account is closed"
    }
  },
  "required": [
    "accountNumber",
    "headroom",
    "closed"
  ]
}
</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "accountNumber": "1100000000001",
  "headroom": 40.00,
  "closed": false
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><p>No NINO could be found</p><pre><code>{
  "code": "FORBIDDEN",
  "message": "Missing NINO"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "NOT FOUND",
  "message": "Account doesn&#39;t exist"
}</code></pre></div></div><div class="tab-pane" id="individuals_help_to_save_account_get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>Bad or expired token. This can happen if the user or HMRC revoked or expired an access token. To fix, you should re-authenticate the user.</p><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won&#39;t help here.</p></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="individuals_help_to_save_account_post"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/individuals/help-to-save</span>/account</h4></div><div class="modal-body"><div class="alert alert-info"><p>Sends a request to create or update an account on behalf of the user, noting the value fields below are all example values with the exception of fields Accept and Content-Type which should be presented as quoted string values as shown. For further information on field formats and examples, please see <a href="https://developer.service.hmrc.gov.uk/api-documentation/docs/reference-guide">https://developer.service.hmrc.gov.uk/api-documentation/docs/reference-guide</a>, noting the timezone should be a UTC offset as outlined in the righthand column at <a href="https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations">https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations</a></p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>write:help-to-save</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#individuals_help_to_save_account_post_request" data-toggle="tab">Request</a></li><li><a href="#individuals_help_to_save_account_post_response" data-toggle="tab">Response</a></li><li><a href="#individuals_help_to_save_account_post_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="individuals_help_to_save_account_post_request"><h3>Annotations</h3><ul><li><strong>annotations.scope</strong><pre><code>"write:help-to-save"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Bearer [SERVER-TOKEN]</p></li><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li><li><strong>Content-Type</strong>: <em>required (string)</em><p>Specifies the format of the request body, which must be JSON.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/json</code></pre></div></li></ul><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "A JSON schema to validate a Help To Save - Create or Update Account JSON payload",
  "type": "object",
  "additionalProperties": true,
  "required": ["header", "body"],
  "properties": {
    "header": {
      "type": "object",
      "additionalProperties": true,
      "required": ["version", "createdTimestamp", "clientCode", "requestCorrelationId"],
      "properties": {
        "version": {
          "type": "string",
          "maxLength": 5,
          "pattern": "^[0-9]+.[0-9]+$"
        },
        "createdTimestamp": {
          "type": "string",
          "maxLength": 25,
          "pattern": "^[1|2][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9] [0-2][0-9]:[0-5][0-9]:[0-6][0-9] [A-Z]{1,5}$"
        },
        "clientCode": {
          "type": "string",
          "maxLength": 20,
          "pattern": "^[A-Z0-9][A-Z0-9_-]+[A-Z0-9]$"
        },
        "requestCorrelationId": {
          "type": "string",
          "maxLength": 36,
          "pattern": "^[0-9a-f-]+$",
          "description": "If the help-to-save create account API is called after a call to this eligibility check API, the X-Correlation-ID value from the eligibility check response should be passed as the requestCorrelationId value in the request to the create account API."
        }
      }
    },
    "body": {
      "type": "object",
      "additionalProperties": true,
      "required": ["registrationChannel"],
      "properties": {
        "nino": {
          "type": "string",
          "minLength": 9,
          "maxLength": 9,
          "pattern": "^(([A-CEGHJ-PR-TW-Z][A-CEGHJ-NPR-TW-Z])([0-9]{2})([0-9]{2})([0-9]{2})([A-D]{1})|((XX)(99)(99)(99)(X)))$"
        },
        "forename": {
          "type": "string",
          "minLength": 1,
          "maxLength": 26
        },
        "surname": {
          "type": "string",
          "minLength": 1,
          "maxLength": 300
        },
        "dateOfBirth": {
          "type": "string",
          "minLength": 8,
          "maxLength": 8,
          "pattern": "^[0-9]{4}(01|02|03|04|05|06|07|08|09|10|11|12)[0-9]{2}$"
        },
        "contactDetails": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "address1": {
              "type": "string",
              "maxLength": 35
            },
            "address2": {
              "type": "string",
              "maxLength": 35
            },
            "address3": {
              "type": "string",
              "maxLength": 35
            },
            "address4": {
              "type": "string",
              "maxLength": 35
            },
            "address5": {
              "type": "string",
              "maxLength": 35
            },
            "postcode": {
              "type": "string",
              "maxLength": 10
            },
            "countryCode": {
              "type": "string",
              "minLength": 2,
              "maxLength": 2,
              "pattern": "[A-Z][A-Z]"
            },
            "communicationPreference": {
              "type": "string",
              "minLength": 2,
              "maxLength": 2,
              "pattern": "00|02"
            },
            "phoneNumber": {
              "type": "string",
              "maxLength": 15
            },
            "email": {
              "type": "string",
              "maxLength": 254,
              "pattern": "^.{1,64}@.{1,252}$"
            }
          }
        },
        "registrationChannel": {
          "type": "string",
          "maxLength": 10,
          "pattern": "^online$|^callCentre$"
        },
        "bankDetails": {
          "type": "object",
          "additionalProperties": true,
          "required": ["accountNumber", "sortCode", "accountName"],
          "properties" : {
            "accountNumber": {
              "type": "string",
              "minLength": 8,
              "maxLength": 8
            },
            "sortCode": {
              "type": "string",
              "minLength": 6,
              "maxLength": 6
            },
            "accountName" : {
              "type" : "string"
            },
            "rollNumber" : {
              "type" : "string"
            }
          }
        }
      }
    }
  }
}
</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "header": {
    "version": "1.0",
    "createdTimestamp": "2017-11-22 23:11:09 GMT",
    "clientCode": "CODE",
    "requestCorrelationId": "123e4567-e89b-12d3-a456-426655440000"
  },
  "body": {
    "nino": "AB123456A",
    "forename": "Alex",
    "surname": "O&#39;Connor",
    "dateOfBirth": "19920423",
    "contactDetails": {
      "address1": "86 Ashopton Road",
      "address2": "Blackpool",
      "postcode": "FY43 1FB",
      "countryCode": "GB",
      "communicationPreference": "00"
    },
    "registrationChannel": "callCentre"
  }
}</code></pre></div></div><div class="tab-pane" id="individuals_help_to_save_account_post_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><p>The Help to Save account has been updated successfully</p><h2>HTTP status code <a href="http://httpstatus.es/201" target="_blank">201</a></h2><p>The Help to Save account has been created successfully</p><h2>HTTP status code <a href="http://httpstatus.es/400" target="_blank">400</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "BAD_NINO",
  "message": "NINO doesn&#39;t match the expected regex"
}
</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/409" target="_blank">409</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "ACCOUNT_ALREADY_EXISTS",
  "message": "Account create request received for account that already exists"
}</code></pre></div></div><div class="tab-pane" id="individuals_help_to_save_account_post_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>Bad or expired token. This can happen if the user or HMRC revoked or expired an access token. To fix, you should re-authenticate the user.</p><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won&#39;t help here.</p></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_individuals_help_to_save_eligibility"><span class="parent">/individuals/help-to-save</span>/eligibility</a> <span class="methods"><a href="#individuals_help_to_save_eligibility_get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_individuals_help_to_save_eligibility" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#individuals_help_to_save_eligibility_get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Sends a request to check the eligibility of an applicant, also checks if the applicant already has an account</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="individuals_help_to_save_eligibility_get"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/individuals/help-to-save</span>/eligibility</h4></div><div class="modal-body"><div class="alert alert-info"><p>Sends a request to check the eligibility of an applicant, also checks if the applicant already has an account</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:help-to-save</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#individuals_help_to_save_eligibility_get_request" data-toggle="tab">Request</a></li><li><a href="#individuals_help_to_save_eligibility_get_response" data-toggle="tab">Response</a></li><li><a href="#individuals_help_to_save_eligibility_get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="individuals_help_to_save_eligibility_get_request"><h3>Annotations</h3><ul><li><strong>annotations.scope</strong><pre><code>"read:help-to-save"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li><li><strong>Authorization</strong>: <em>required (string)</em><p>Bearer [SERVER-TOKEN]</p></li></ul></div><div class="tab-pane" id="individuals_help_to_save_eligibility_get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Headers</h3><ul><li><strong>X-Correlation-ID</strong>: <em>required (string)</em><p>An id used for debugging purposes. It should match the regex "^([A-Z]|[a-z]|[0-9]|-){1,40}$"</p></li></ul><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "JSON schema for Ok Help to Save eligibility check response",
  "type":"object",
  "properties":{
    "eligibility": {
      "type":"object",
      "properties":{
        "isEligible": {
          "type":"boolean"
        },
        "hasWTC": {
          "type":"boolean"
        },
        "hasUC": {
          "type":"boolean"
        }
      },
      "required": [
        "isEligible",
        "hasWTC",
        "hasUC"
      ]
    },
    "accountExists": {
      "type": "boolean"
    }
  },
  "required": [
    "accountExists"
  ]
}</code></pre><p><strong>Examples</strong>:</p><div class="examples"><p><strong>example-1</strong>:<br>The person is eligible for Help to Save as they are entitled to WTC and in receipt of positive WTC/CTC Tax Credit and in receipt of UC and their household income is sufficient</p><pre><code>{
  "eligibility": {
    "isEligible": true,
    "hasWTC": true,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-2</strong>:<br>The person is eligible for Help to Save as they are in receipt of UC and their household income is sufficient</p><pre><code>{
  "eligibility": {
    "isEligible": true,
    "hasWTC": false,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-3</strong>:<br>The person is eligible for Help to Save as they are entitled to WTC and in receipt of positive WTC/CTC Tax Credit</p><pre><code>{
  "eligibility": {
    "isEligible": true,
    "hasWTC": true,
    "hasUC": false
  },
  "accountExists": false
}
</code></pre><p><strong>example-4</strong>:<br>The person is ineligible for Help to Save as they are entitled to WTC but not in receipt of positive WTC/CTC Tax Credit (nil TC) and in receipt of UC but their household income is insufficient</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": true,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-5</strong>:<br>The person is ineligible for Help to Save as they are not entitled to WTC and are in receipt of UC but their household income is insufficient</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": false,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-6</strong>:<br>The person is ineligible for Help to Save as they are entitled to WTC but not in receipt of positive WTC/CTC Tax Credit (nil TC) and they are not in receipt of UC</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": true,
    "hasUC": false
  },
  "accountExists": false
}
</code></pre><p><strong>example-7</strong>:<br>The person is ineligible for Help to Save as they are not entitled to WTC and not in receipt of UC</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": false,
    "hasUC": false
  },
  "accountExists": false
}
</code></pre><p><strong>example-8</strong>:<br>The person already has a Help to Save account</p><pre><code>{
  "accountExists": true
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/400" target="_blank">400</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "BAD_NINO",
  "message": "NINO doesn&#39;t match the expected regex"
}
</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "NO_NINO",
  "message": "NINO could not be found"
}
</code></pre></div></div><div class="tab-pane" id="individuals_help_to_save_eligibility_get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>Bad or expired token. This can happen if the user or HMRC revoked or expired an access token. To fix, you should re-authenticate the user.</p><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won&#39;t help here.</p></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_individuals_help_to_save_eligibility__nino_"><span class="parent">/individuals/help-to-save/eligibility</span>/{nino}</a> <span class="methods"><a href="#individuals_help_to_save_eligibility__nino__get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_individuals_help_to_save_eligibility__nino_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#individuals_help_to_save_eligibility__nino__get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Sends a request to check the eligibility of an applicant, also checks if the applicant already has an account</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="individuals_help_to_save_eligibility__nino__get"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/individuals/help-to-save/eligibility</span>/{nino}</h4></div><div class="modal-body"><div class="alert alert-info"><p>Sends a request to check the eligibility of an applicant, also checks if the applicant already has an account</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:help-to-save</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#individuals_help_to_save_eligibility__nino__get_request" data-toggle="tab">Request</a></li><li><a href="#individuals_help_to_save_eligibility__nino__get_response" data-toggle="tab">Response</a></li><li><a href="#individuals_help_to_save_eligibility__nino__get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="individuals_help_to_save_eligibility__nino__get_request"><h3>URI Parameters</h3><ul><li><strong>nino</strong>: <em>required (string)</em><p>The National Insurance Number for the individual. When given, it must match the regex "^((?!(BG|GB|KN|NK|NT|TN|ZZ)|(D|F|I|Q|U|V)[A-Z]|[A-Z](D|F|I|O|Q|U|V))[A-Z]{2})[0-9]{6}[A-D]?$". For requests using privileged access the NINO is a mandatory parameter.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>AB123456C</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong><pre><code>"read:help-to-save"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li><li><strong>Authorization</strong>: <em>required (string)</em><p>Bearer [SERVER-TOKEN]</p></li></ul></div><div class="tab-pane" id="individuals_help_to_save_eligibility__nino__get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Headers</h3><ul><li><strong>X-Correlation-ID</strong>: <em>required (string)</em><p>An id used for debugging purposes. It should match the regex "^([A-Z]|[a-z]|[0-9]|-){1,40}$"</p></li></ul><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "JSON schema for Ok Help to Save eligibility check response",
  "type":"object",
  "properties":{
    "eligibility": {
      "type":"object",
      "properties":{
        "isEligible": {
          "type":"boolean"
        },
        "hasWTC": {
          "type":"boolean"
        },
        "hasUC": {
          "type":"boolean"
        }
      },
      "required": [
        "isEligible",
        "hasWTC",
        "hasUC"
      ]
    },
    "accountExists": {
      "type": "boolean"
    }
  },
  "required": [
    "accountExists"
  ]
}</code></pre><p><strong>Examples</strong>:</p><div class="examples"><p><strong>example-1</strong>:<br>The person is eligible for Help to Save as they are entitled to WTC and in receipt of positive WTC/CTC Tax Credit and in receipt of UC and their household income is sufficient</p><pre><code>{
  "eligibility": {
    "isEligible": true,
    "hasWTC": true,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-2</strong>:<br>The person is eligible for Help to Save as they are in receipt of UC and their household income is sufficient</p><pre><code>{
  "eligibility": {
    "isEligible": true,
    "hasWTC": false,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-3</strong>:<br>The person is eligible for Help to Save as they are entitled to WTC and in receipt of positive WTC/CTC Tax Credit</p><pre><code>{
  "eligibility": {
    "isEligible": true,
    "hasWTC": true,
    "hasUC": false
  },
  "accountExists": false
}
</code></pre><p><strong>example-4</strong>:<br>The person is ineligible for Help to Save as they are entitled to WTC but not in receipt of positive WTC/CTC Tax Credit (nil TC) and in receipt of UC but their household income is insufficient</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": true,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-5</strong>:<br>The person is ineligible for Help to Save as they are not entitled to WTC and are in receipt of UC but their household income is insufficient</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": false,
    "hasUC": true
  },
  "accountExists": false
}
</code></pre><p><strong>example-6</strong>:<br>The person is ineligible for Help to Save as they are entitled to WTC but not in receipt of positive WTC/CTC Tax Credit (nil TC) and they are not in receipt of UC</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": true,
    "hasUC": false
  },
  "accountExists": false
}
</code></pre><p><strong>example-7</strong>:<br>The person is ineligible for Help to Save as they are not entitled to WTC and not in receipt of UC</p><pre><code>{
  "eligibility": {
    "isEligible": false,
    "hasWTC": false,
    "hasUC": false
  },
  "accountExists": false
}
</code></pre><p><strong>example-8</strong>:<br>The person already has a Help to Save account</p><pre><code>{
  "accountExists": true
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/400" target="_blank">400</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "BAD_NINO",
  "message": "NINO doesn&#39;t match the expected regex"
}
</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "code": "NO_NINO",
  "message": "NINO could not be found"
}
</code></pre></div></div><div class="tab-pane" id="individuals_help_to_save_eligibility__nino__get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>Bad or expired token. This can happen if the user or HMRC revoked or expired an access token. To fix, you should re-authenticate the user.</p><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>Bad OAuth request (wrong consumer key, bad nonce, expired timestamp...). Unfortunately, re-authenticating the user won&#39;t help here.</p></div></div></div></div></div></div></div></div></div></div></div><div class="col-md-3"><div id="sidebar" class="hidden-print affix" role="complementary"><ul class="nav nav-pills nav-stacked"><li><a href="#individuals">/individuals</a></li></ul></div></div></div></div></body></html>